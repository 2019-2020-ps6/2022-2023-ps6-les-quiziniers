{"ast":null,"code":"import { BehaviorSubject, Subject } from 'rxjs';\nimport { serverUrl, httpOptionsBase } from '../configs/server.config';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class UserService {\n  constructor(http) {\n    this.http = http;\n    /*\r\n     The list of user.\r\n     */\n    this.users = [];\n    /*\r\n     Observable which contains the list of the user.\r\n     */\n    this.users$ = new BehaviorSubject([]);\n    this.userSelected$ = new Subject();\n    this.userUrl = serverUrl + '/users';\n    this.httpOptions = httpOptionsBase;\n    this.retrieveUsers();\n  }\n  retrieveUsers() {\n    this.http.get(this.userUrl).subscribe(userList => {\n      this.users = userList;\n      this.users$.next(this.users);\n    });\n  }\n  addUser(user) {\n    this.http.post(this.userUrl, user, this.httpOptions).subscribe(() => this.retrieveUsers());\n  }\n  setSelectedUser(userId) {\n    const urlWithId = this.userUrl + '/' + userId;\n    this.http.get(urlWithId).subscribe(user => {\n      this.userSelected$.next(user);\n    });\n  }\n  deleteUser(user) {\n    const urlWithId = this.userUrl + '/' + user.id;\n    this.http.delete(urlWithId, this.httpOptions).subscribe(() => this.retrieveUsers());\n  }\n}\nUserService.ɵfac = function UserService_Factory(t) {\n  return new (t || UserService)(i0.ɵɵinject(i1.HttpClient));\n};\nUserService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: UserService,\n  factory: UserService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAEA,SAASA,eAAe,EAAEC,OAAO,QAAQ,MAAM;AAE/C,SAASC,SAAS,EAAEC,eAAe,QAAQ,0BAA0B;;;AAKrE,OAAM,MAAOC,WAAW;EAkBtBC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;IAjBxB;;;IAGQ,UAAK,GAAW,EAAE;IAE1B;;;IAGO,WAAM,GACT,IAAIN,eAAe,CAAC,EAAE,CAAC;IAEpB,kBAAa,GAAkB,IAAIC,OAAO,EAAE;IAE3C,YAAO,GAAGC,SAAS,GAAG,QAAQ;IAE9B,gBAAW,GAAGC,eAAe;IAGnC,IAAI,CAACI,aAAa,EAAE;EACtB;EAEAA,aAAa;IACX,IAAI,CAACD,IAAI,CAACE,GAAG,CAAS,IAAI,CAACC,OAAO,CAAC,CAACC,SAAS,CAAEC,QAAQ,IAAI;MACzD,IAAI,CAACC,KAAK,GAAGD,QAAQ;MACrB,IAAI,CAACE,MAAM,CAACC,IAAI,CAAC,IAAI,CAACF,KAAK,CAAC;IAC9B,CAAC,CAAC;EACJ;EAEAG,OAAO,CAACC,IAAU;IAChB,IAAI,CAACV,IAAI,CAACW,IAAI,CAAO,IAAI,CAACR,OAAO,EAAEO,IAAI,EAAE,IAAI,CAACE,WAAW,CAAC,CAACR,SAAS,CAAC,MAAM,IAAI,CAACH,aAAa,EAAE,CAAC;EAClG;EAEAY,eAAe,CAACC,MAAc;IAC5B,MAAMC,SAAS,GAAG,IAAI,CAACZ,OAAO,GAAG,GAAG,GAAGW,MAAM;IAC7C,IAAI,CAACd,IAAI,CAACE,GAAG,CAAOa,SAAS,CAAC,CAACX,SAAS,CAAEM,IAAI,IAAI;MAChD,IAAI,CAACM,aAAa,CAACR,IAAI,CAACE,IAAI,CAAC;IAC/B,CAAC,CAAC;EACJ;EAEAO,UAAU,CAACP,IAAU;IACnB,MAAMK,SAAS,GAAG,IAAI,CAACZ,OAAO,GAAG,GAAG,GAAGO,IAAI,CAACQ,EAAE;IAC9C,IAAI,CAAClB,IAAI,CAACmB,MAAM,CAAOJ,SAAS,EAAE,IAAI,CAACH,WAAW,CAAC,CAACR,SAAS,CAAC,MAAM,IAAI,CAACH,aAAa,EAAE,CAAC;EAC3F;;;mBA3CWH,WAAW;AAAA;;SAAXA,WAAW;EAAAsB,SAAXtB,WAAW;EAAAuB,YAFV;AAAM","names":["BehaviorSubject","Subject","serverUrl","httpOptionsBase","UserService","constructor","http","retrieveUsers","get","userUrl","subscribe","userList","users","users$","next","addUser","user","post","httpOptions","setSelectedUser","userId","urlWithId","userSelected$","deleteUser","id","delete","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\elias\\OneDrive\\Bureau\\2022-2023-ps6-les-quiziniers\\front-end\\src\\services\\user.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { BehaviorSubject, Subject } from 'rxjs';\r\nimport { User } from '../models/user.model';\r\nimport { serverUrl, httpOptionsBase } from '../configs/server.config';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserService {\r\n  /*\r\n   The list of user.\r\n   */\r\n  private users: User[] = [];\r\n\r\n  /*\r\n   Observable which contains the list of the user.\r\n   */\r\n  public users$: BehaviorSubject<User[]>\r\n    = new BehaviorSubject([]);\r\n\r\n  public userSelected$: Subject<User> = new Subject();\r\n\r\n  private userUrl = serverUrl + '/users';\r\n\r\n  private httpOptions = httpOptionsBase;\r\n\r\n  constructor(private http: HttpClient) {\r\n    this.retrieveUsers();\r\n  }\r\n\r\n  retrieveUsers(): void {\r\n    this.http.get<User[]>(this.userUrl).subscribe((userList) => {\r\n      this.users = userList;\r\n      this.users$.next(this.users);\r\n    });\r\n  }\r\n\r\n  addUser(user: User): void {\r\n    this.http.post<User>(this.userUrl, user, this.httpOptions).subscribe(() => this.retrieveUsers());\r\n  }\r\n\r\n  setSelectedUser(userId: string): void {\r\n    const urlWithId = this.userUrl + '/' + userId;\r\n    this.http.get<User>(urlWithId).subscribe((user) => {\r\n      this.userSelected$.next(user);\r\n    });\r\n  }\r\n\r\n  deleteUser(user: User): void {\r\n    const urlWithId = this.userUrl + '/' + user.id;\r\n    this.http.delete<User>(urlWithId, this.httpOptions).subscribe(() => this.retrieveUsers());\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}